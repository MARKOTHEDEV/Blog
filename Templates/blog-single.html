{% load static %}
<!DOCTYPE html>
<html lang="en-US">

<!-- Mirrored from maanjaa.com/themeger/katen-demo/html/blog-single.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Sep 2021 06:41:54 GMT -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Katen - Minimal Blog & Magazine HTML Theme</title>
	<meta name="description" content="Katen - Minimal Blog & Magazine HTML Theme">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon.png' %}">

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
	<!-- STYLES -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css" media="all">
	<link rel="stylesheet" href="{% static 'css/all.min.css' %}" type="text/css" media="all">
	<link rel="stylesheet" href="{% static 'css/slick.css' %}" type="text/css" media="all">
	<link rel="stylesheet" href="{% static 'css/simple-line-icons.css' %}" type="text/css" media="all">
	<link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css" media="all">

	<style>
		.thumb{
			color: #FE4F70;
			font-size: 1.5rem;
		}
		.flex-boxsection{
			display: flex;
			justify-content: space-between;
				width: 90px;
			margin: 0 auto;align-items: center;
		}
	</style>
	

</head>

<body>

<!-- preloader -->
<div id="preloader">
	<div class="book">
		<div class="inner">
			<div class="left"></div>
			<div class="middle"></div>
			<div class="right"></div>
		</div>
		<ul>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
			<li></li>
		</ul>
	</div>
</div>

<!-- site wrapper -->
<div class="site-wrapper">

	<div class="main-overlay"></div>

		<!-- start of main_nav -->
		{% include './partials/main_nav.html' %}
	<!-- end of main_nav -->

	<!-- section main content -->
	<section class="main-content mt-3">
		<div class="container-xl">

            <!-- <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item"><a href="#">Inspiration</a></li>
                    <li class="breadcrumb-item active" aria-current="page">3 Easy Ways To Make Your iPhone Faster</li>
                </ol>
            </nav> -->

			<div class="row gy-4">

				<div class="col-lg-8">
					<!-- post single -->
                    <div class="post post-single">
						<!-- post header -->
						<div class="post-header">
							<h1 class="title mt-0 mb-3">{{ blogpost.title }}</h1>
							<ul class="meta list-inline mb-0">
								<li class="list-inline-item"><a href="#"><img src="{{ blogpost.author.image.url }}"  class="author" style="height: 30px;width:30px;border-radius:50%;" alt="author"/>{{ blogpost.author }}</a></li>
								<li class="list-inline-item"><a href="#">{{ blogpost.categories }}</a></li>
								<li class="list-inline-item">{{ blogpost.date_created|date:"D, M Y." }}</li>
							</ul>
						</div>
						<!-- featured image -->
						<div class="featured-image">
							<img src="{{ blogpost.main_image.url }}" alt="post-title" />
						</div>
						<!-- post content -->
						<div class="post-content clearfix">
							
							{% for paragraph in paragraphs %}
								<figure class="figure"> 
									
									{% if paragraph.image == '' %}

									{% else %}
									<img class="figure-img img-fluid rounded" src="{{ paragraph.image.url }}" alt="">
									{% endif %}
										
								
								</figure>
								<p>{{ paragraph.input_text}}</p>
							{% endfor %}
								
							<div >
		
		{% for like_dislike in like_dislike_obj %}
	<div class="flex-boxsection">
		<div class="like_or_dislike_pane">
			<i class="fas fa-thumbs-up thumb" id="like"></i>
			<!-- <button class="btn btn-secondary" id="like">:Like</button> -->
			<p>{{ like_dislike.likes }}</p>
			
		</div>
		
		<div class="like_or_dislike_pane">
			<i class="fas fa-thumbs-down thumb" id="dislike"></i>
			<!-- <button class="btn btn-secondary" >DisLike</button> -->
			<p>{{ like_dislike.dislikes }}</p>
		</div>
	</div>
		{% endfor %}
			

</div>
						</div>
						<!-- post bottom section -->
						<!-- 	
							<div class="row d-flex align-items-center">
								<div class="col-md-6 col-12 text-center text-md-start">
									tags
									<a href="#" class="tag">#Trending</a>
									<a href="#" class="tag">#Video</a>
									<a href="#" class="tag">#Featured</a>
								</div>
								<div class="col-md-6 col-12">
									social icons
									<ul class="social-icons list-unstyled list-inline mb-0 float-md-end">
										<li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f"></i></a></li>
										<li class="list-inline-item"><a href="#"><i class="fab fa-twitter"></i></a></li>
										<li class="list-inline-item"><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
										<li class="list-inline-item"><a href="#"><i class="fab fa-pinterest"></i></a></li>
										<li class="list-inline-item"><a href="#"><i class="fab fa-telegram-plane"></i></a></li>
										<li class="list-inline-item"><a href="#"><i class="far fa-envelope"></i></a></li>
									</ul>
								</div>
							</div>
						</div> -->

                    </div>

					<div class="spacer" data-height="50"></div>

					<div class="about-author padding-30 rounded">
						<div class="thumb">
							<img src="{% static 'images/other/avatar-about.png' %}" alt="Katen Doe" />
						</div>
						<div class="details">
							<h4 class="name"><a href="#">Katen Doe</a></h4>
							<p>Hello, Iâ€™m a content writer who is fascinated by content fashion, celebrity and lifestyle. She helps clients bring the right content to the right people.</p>
							<!-- social icons -->
							<ul class="social-icons list-unstyled list-inline mb-0">
								<li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-twitter"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-instagram"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-pinterest"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-medium"></i></a></li>
								<li class="list-inline-item"><a href="#"><i class="fab fa-youtube"></i></a></li>
							</ul>
						</div>
					</div>

					<div class="spacer" data-height="50"></div>

					<!-- section header -->
					<div class="section-header">
						<h3 class="section-title">Comments ({{ num_of_comment }})</h3>
						<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
					</div>
					<!-- post comments -->
					<div class="comments bordered padding-30 rounded">

						<ul class="comments">
							
							{% for comment  in all_comment  %}
											<!-- comment item -->
										<li class="comment rounded">
											<div class="thumb">
												<img src="{% static 'images/user.jpg' %}" style="height: 70px;width:70px;border-radius:50%;" alt="John Doe" />
											</div>
											<div class="details">
												<h4 class="name"><a href="#">{{ comment.name }}</a></h4>
												<span class="date">{{ comment.date_created|date:"D, M Y." }}</span>
												<p>{{ comment.comment_text }}</p>
												<!-- <p>	comment item
													<li class="comment rounded">
														<div class="thumb">
															<img src="images/other/comment-1.png" alt="John Doe" />
														</div>
														<div class="details">
															<h4 class="name"><a href="#">John Doe</a></h4>
															<span class="date">Jan 08, 2021 14:41 pm</span>
															<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam vitae odio ut tortor fringilla cursus sed quis odio.</p>
															<a href="#" class="btn btn-default btn-sm">Reply</a>
														</div>
													</li>
													</p> -->
												<!-- <a href="#" class="btn btn-default btn-sm">Reply</a> -->
											</div>
										</li>
										
							{% endfor %}
								
						
						</ul>
					</div>

					<div class="spacer" data-height="50"></div>

					<!-- section header -->
					<div class="section-header">
						<h3 class="section-title">Leave Comment</h3>
						<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
					</div>
					<!-- comment form -->
					<div class="comment-form rounded bordered padding-30">

						<form action="{% url 'create_comment' blogpost.id %}" id="comment-form" class="comment-form" method="post">
							{% csrf_token %}
							<div class="messages"></div>
							
							<div class="row">

								<div class="column col-md-12">
									<!-- Comment textarea -->
									<div class="form-group">
										<textarea name="comment_text" id="InputComment" class="form-control" rows="4" placeholder="Your comment here..." required="required"></textarea>
									</div>
								</div>
	
								<div class="column col-md-12">
									<!-- Email input -->
									<div class="form-group">
										<input type="text" class="form-control" id="InputName" name="name" placeholder="Your name" required="required">
									</div>
								</div>
						
							</div>
	
							<button type="submit" name="submit" id="submit" value="Submit" class="btn btn-default">Submit</button><!-- Submit Button -->
	
						</form>
					</div>
                </div>
				
				<div class="col-lg-4">

					<!-- sidebar -->
					<div class="sidebar">
						<!-- widget about -->
						<div class="widget rounded">
							<div class="widget-about data-bg-image text-center" data-bg-image="images/map-bg.png">
								<!-- <img src="images/logo.svg" alt="logo" class="mb-4" /> -->
								<h3 class="widget-title">MyBlog</h3>
								<p class="mb-4">{{about_site.body}}</p>
								<ul class="social-icons list-unstyled list-inline mb-0">
									<li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f"></i></a></li>
									<li class="list-inline-item"><a href="#"><i class="fab fa-twitter"></i></a></li>
									<li class="list-inline-item"><a href="#"><i class="fab fa-instagram"></i></a></li>
									<li class="list-inline-item"><a href="#"><i class="fab fa-pinterest"></i></a></li>
									<li class="list-inline-item"><a href="#"><i class="fab fa-medium"></i></a></li>
									<li class="list-inline-item"><a href="#"><i class="fab fa-youtube"></i></a></li>
								</ul>
							</div>
						</div>

						<!-- widget popular posts -->
						<div class="widget rounded">
							<div class="widget-header text-center">
								<h3 class="widget-title">Popular Posts</h3>
								<img src="{% static 'images/wave.svg' %}" class="wave" alt="wave" />
							</div>
							<div class="widget-content">
								
								
								{% for post in 5popular_posts  %}
										<!-- post -->
								<div class="post post-list-sm circle">
									<div class="thumb circle">
										<span class="number">1</span>
										<a href="blog-single.html">
											<div class="inner">
												<img src="{{ post.main_image.url }}" alt="post-title" />
											</div>
										</a>
									</div>
									<div class="details clearfix">
										<h6 class="post-title my-0"><a href="blog-single.html">{{ post.title }}</a></h6>
										<ul class="meta list-inline mt-1 mb-0">
											<li class="list-inline-item">{{ post.date_created|date:"D, M Y." }}</li>
										</ul>
									</div>
								</div>
								{% endfor %}
									
							
								
							</div>		
						</div>

						<!-- widget categories -->
						<div class="widget rounded">
							<div class="widget-header text-center">
								<h3 class="widget-title">Explore Topics</h3>
								<img src="images/wave.svg" class="wave" alt="wave" />
							</div>
							<div class="widget-content">
								<ul class="list">
									<li><a href="#">Lifestyle</a><span>(5)</span></li>
									<li><a href="#">Inspiration</a><span>(2)</span></li>
									<li><a href="#">Fashion</a><span>(4)</span></li>
									<li><a href="#">Politic</a><span>(1)</span></li>
									<li><a href="#">Trending</a><span>(7)</span></li>
									<li><a href="#">Culture</a><span>(3)</span></li>
								</ul>
							</div>
							
						</div>

						<!-- widget newsletter -->
						<!-- <div class="widget rounded">
							<div class="widget-header text-center">
								<h3 class="widget-title">Newsletter</h3>
								<img src="images/wave.svg" class="wave" alt="wave" />
							</div>
							<div class="widget-content">
								<span class="newsletter-headline text-center mb-3">Join 70,000 subscribers!</span>
								<form>
									<div class="mb-2">
										<input class="form-control w-100 text-center" placeholder="Email addressâ€¦" type="email">
									</div>
									<button class="btn btn-default btn-full" type="submit">Sign Up</button>
								</form>
								<span class="newsletter-privacy text-center mt-3">By signing up, you agree to our <a href="#">Privacy Policy</a></span>
							</div>		
						</div> -->

					

						<!-- widget advertisement -->
						<!-- <div class="widget no-container rounded text-md-center">
							<span class="ads-title">- Sponsored Ad -</span>
							<a href="#" class="widget-ads">
								<img src="images/ads/ad-360.png" alt="Advertisement" />	
							</a>
						</div> -->

						<!-- widget tags -->
						<!-- <div class="widget rounded">
							<div class="widget-header text-center">
								<h3 class="widget-title">Tag Clouds</h3>
								<img src="images/wave.svg" class="wave" alt="wave" />
							</div>
							<div class="widget-content">
								<a href="#" class="tag">#Trending</a>
								<a href="#" class="tag">#Video</a>
								<a href="#" class="tag">#Featured</a>
								<a href="#" class="tag">#Gallery</a>
								<a href="#" class="tag">#Celebrities</a>
							</div>		
						</div> -->

					</div>

				</div>

			</div>

		</div>
	</section>



	<!-- footer -->
	<footer>
		<div class="container-xl">
			<div class="footer-inner">
				<div class="row d-flex align-items-center gy-4">
					<!-- copyright text -->
					<div class="col-md-4">
						<span class="copyright">Â© 2021. Template by @Markothedev.</span>
					</div>

					<!-- social icons -->
					<div class="col-md-4 text-center">
						<ul class="social-icons list-unstyled list-inline mb-0">
							<li class="list-inline-item"><a href="#"><i class="fab fa-facebook-f"></i></a></li>
							<li class="list-inline-item"><a href="#"><i class="fab fa-twitter"></i></a></li>
							<li class="list-inline-item"><a href="#"><i class="fab fa-instagram"></i></a></li>
							<li class="list-inline-item"><a href="#"><i class="fab fa-pinterest"></i></a></li>
							<li class="list-inline-item"><a href="#"><i class="fab fa-medium"></i></a></li>
							<li class="list-inline-item"><a href="#"><i class="fab fa-youtube"></i></a></li>
						</ul>
					</div>

					<!-- go to top button -->
					<div class="col-md-4">
						<a href="#" id="return-to-top" class="float-md-end"><i class="icon-arrow-up"></i>Back to Top</a>
					</div>
				</div>
			</div>
		</div>
	</footer>

</div><!-- end site wrapper -->

<!-- search popup area -->
<div class="search-popup">
	<!-- close button -->
	<button type="button" class="btn-close" aria-label="Close"></button>
	<!-- content -->
	<div class="search-content">
		<div class="text-center">
			<h3 class="mb-4 mt-0">Press ESC to close</h3>
		</div>
		<!-- form -->
		<form class="d-flex search-form">
			<input class="form-control me-2" type="search" placeholder="Search and press enter ..." aria-label="Search">
			<button class="btn btn-default btn-lg" type="submit"><i class="icon-magnifier"></i></button>
		</form>
	</div>
</div>

<!-- canvas menu -->
{% include './partials/side_nav.html' %}
<!-- end of canvas menu -->
<!-- JAVA SCRIPTS -->
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/popper.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/slick.min.js' %}"></script>
<script src="{% static 'js/jquery.sticky-sidebar.min.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>

<script>
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    const csrftoken = getCookie('csrftoken');
</script>

<script>
	
	const dislikeBtn= document.querySelector('#dislike');
	const likeBtn= document.querySelector('#like');
	let preloader = document.querySelector('#preloader');
	const postid = '{{ postid }}'

	 function sendToBackend(event,dislike=false,like=false){
		let data = {'dislike':dislike,'like':like} 
	
		preloader.style.display="block"
		
		fetch("{% url 'likes_and_dislike'  postid %}",{
			method: 'POST', // or 'PUT'
			headers: {
			  'Content-Type': 'application/json',
			  'X-CSRFToken':csrftoken
			},
			body: JSON.stringify(data),
		  })
		  .then(data=>data.json())
		  .then(data=>{
		preloader.style.display="none";
			event.target.parentElement.querySelector('p').innerText=dislike==true?data.dislikes:data.likes;
			
		  })
		}

	dislikeBtn.addEventListener('click',e=>{
		e.preventDefault();

		sendToBackend(e,dislike=true,like=false)
	})

	likeBtn.addEventListener('click',e=>{
		e.preventDefault();
		

		sendToBackend(e,dislike=false,like=true)
	})
</script>
</body>

</html>